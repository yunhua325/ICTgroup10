# calcErrorRate.py 说明

## 运行环境

- **Python版本**: Python 3.x
- **依赖库**: 无需额外依赖库（仅使用Python标准库）
- **操作系统**: Windows / Linux / macOS

## 功能概述

`calcErrorRate.py` 是一个用于计算两个文件之间误码率的工具程序。它通过逐位对比两个文件的二进制内容，统计错误位数并计算误码率，最后将结果保存为CSV格式。

## 使用方法

### 基本语法

```bash
python calcErrorRate.py INPUT1 INPUT2 RESULT
```

**参数说明：**
- `INPUT1`: 第一个对比文件的路径
- `INPUT2`: 第二个对比文件的路径  
- `RESULT`: 结果CSV文件的保存路径

### 使用示例

#### 示例：误码率计算

```bash

# 计算两个二进制文件的误码率
python calcErrorRate.py original.bin decoded.bin error_rate.csv

# 计算编码前后的文件误码率
python calcErrorRate.py source.dat encoded.dat error_analysis.csv
```


## 工作原理

### 文件读取
- 以二进制模式读取两个文件的全部内容
- 自动处理文件不存在、权限不足等异常情况
- 支持任意格式的文件（文本、图像、音频、二进制数据等）

### 位级对比
- 逐字节对比两个文件，每个字节拆分为8位
- 从高位到低位进行位级比较（第7位到第0位）
- 自动处理文件长度不一致的情况（较短的文件补0字节）

### 误码率计算
- 统计总对比位数和错误位数
- 计算公式：`误码率 = 错误位数 / 总位数`
- 避免除零错误（空文件时误码率设为0.0）

## 输出格式

### 控制台输出
程序运行时会在控制台显示：
```
正在读取文件：original.txt 和 decoded.txt...
正在进行位级对比计算误码率...
计算完成：
  总位数：1024
  错误位数：15
  误码率：0.014648
成功：结果已保存到 'error_rate.csv'
```

### CSV文件格式
程序支持命令行参数，格式如下：
- `INPUT1`: 第一个文件的路径
- `INPUT2`: 第二个文件的路径  
- `error_rate`: 计算得到的误码率（保留6位小数）

**CSV示例内容：**
```csv
"INPUT1","INPUT2","error_rate"
"original.txt","decoded.txt","0.014648"
"source.bin","corrupted.bin","0.123456"
```

## 特殊情况处理

### 文件长度不一致
当两个文件长度不同时，程序会：
- 自动取两个文件的最大长度
- 对较短的文件进行补0处理
- 确保完整对比所有位

### 空文件处理
- 如果两个文件都为空，误码率设为0.0
- 程序会显示警告信息提示空文件情况

### 异常处理
程序会友好处理以下异常：
- 文件不存在：提示检查路径是否正确
- 权限不足：提示无读取或写入权限
- 其他IO错误：显示具体错误原因


## 注意事项

1. **文件路径**: 确保提供的文件路径正确，程序会自动检查文件是否存在
2. **权限要求**: 需要对输入文件有读取权限，对输出文件有写入权限
3. **内存使用**: 大文件会完全加载到内存中，处理超大文件时注意内存限制
4. **结果追加**: CSV文件支持追加模式，重复运行会在文件末尾添加新记录
